## TCP和UDP

协议：约定俗成
	男娶女嫁

	公有协议：俗成   tcp udp http https smtp  pppoe ip ftp
		国标
	私有协议：私自约定  企业 
		非标

教师端：   pc机  （麦克风 显示器 win10）               

腾讯服务器：  

学生端：


物理层：		网卡  光纤  双绞线     物理信号->数字信号	
数据链路层：	ip协议  交换机
网络层：		tcp  udp 
传输层：		加密 
应用层：		显示

ipv4：
ipv6

ip协议用来区分主机

tcp：  有中心  所有数据都由服务器来中转
		服务器							客户端
	1. 确定协议版本					1. 确定协议版本
	2. 创建socket					2. 创建socket
	3. 确定服务器协议地址簇			3. 获取服务器协议地址簇
	4. 绑定
	5. 监听
	6. 接受连接						4. 连接服务器
	7. 通信							5. 通信
	8. 断开连接						6. 断开连接
	9. 清理协议版本信息				7. 清理协议版本信息




		我家     强哥的女儿想要买一件漂亮的裙子
中心化：   负责人
去中心化： 没有负责人 所有人都是负责人 所有人同意  买了
		交易
比特币： 4万人    账单  所有人持有      所有人做监督    
银行：   4万人    买卖双方 和银行持有   银行来做监督


​		
​		

socket：  文件     网线
	声带   耳膜
协议地址簇：区分主机上的不同程序的


tcp   接受连接后    建立了 服务器与客户端之间 稳定的数据传输通道
全双工

打电话




文件传输：
	服务器 ：  接收端
		
	客户端 ：  发送端


	1. 客户端连上服务器
	2. 客户端 打开 文件，获取文件名和文件大小 发送给服务器
	3. 服务器 接收文件名和文件大小  并 创建文件
	4. 客户端循环读取文件内容并发送给服务器   发送完毕 关闭文件
	   服务器循环接受文件内容并写入到文件中   接受并写入完毕 关闭文件
	5. 断开连接

线程基础：
	main函数  主线程
	main函数中启动的线程   分支线程
	主线程和分支线程   并行
	并行：一起运行 

聊天室：
	服务器：接收多个客户端连接，同时要接受客户端发来的数据，
	并广播给当前连接上服务器的所有客户端
		
		1 循环接受多个客户端连接
		2 接受到一个客户端链接后  启动一个线程 和这个客户端通信
			如何通信：接受客户端发来的数据，并广播给当前连接上服务器的所有客户端
	
	客户端：连接服务器 循环等待用户输入，并发送给服务器
		同时循环等待服务器发来数据，并显示
		1. 连接服务器
		2. 主线程  等待服务器发来数据，接收到了，就显示
		   分支线程 等待用户输入，输入了，就发送给服务器






一 udp协议    tcp中心化    udp去中心化  点对点
		Server						Client
	1. 确定协议版本信息			1. 确定协议版本信息
	2. 创建socket  				2. 创建socket
	3. 确定服务器协议地址簇		3. 获取服务器协议地址簇	
	4. 绑定						
	5. 通信						4. 通信
	6. 关闭socket				5. 关闭socket
	7. 清理协议版本信息			6. 清理协议版本信息

二 tcp与udp的区别
	1. tcp通信媒介为 SOCK_STREAM udp为SOCK_DGRAM
	2. tcp有连接(打电话)  udp无连接(发短信)
	3. tcp数据有序  udp数据无序
	4. tcp数据有边界  udp数据无边界
	5. tcp可靠 udp不可靠
	6. tcp安全 udp不安全
	7. tcp慢 udp快

	pps bt种子


三 tcp协议的部分详情
	3.1 三次握手   如何建立连接
		
	3.2 四次挥手   如何断开连接
		
	3.3 tcp的十一种状态
	CLOSED：断开状态  最开始也是最终的状态  单身狗状态
	ESTABLISH：建立好稳定数据传输通道状态   酸臭
	
	LISTEN：监听后     准备好接受连接了
	SYN_RCVD：一般很短暂
		收到了SYN 后，发送SYN和ACK之前
	SYN_SENT：
		发送SYN后，接收ACK前
	FIN_WAIT1：
		向对方发送FIN后，接收ACK前
	FIN_WAIT2：
		收到ACK后，发送FIN前
	CLOSING：双方同时发送FIN，同时收到ACK
	TIME_WAIT：等待网络延迟的定时器
	CLOSE_WAIT：客户端发送FIN后，发送ACK前
	LAST_ACK:	最后一次发送ACK之前

![](C:\Users\ASUS\Pictures\博客图片\tcp的十一种状态(1).png)

![](C:\Users\ASUS\Pictures\博客图片\tcp十一种状态3(1).jpg)