ELF文件

~~~shell
1. 编写的代码，首先通过「编译器」编译成汇编代码，接着通过「汇编器」变成目标代码，也就是目标文件，最后通过「链接器」把多个目标文件以及调用的各种函数库链接起来，形成一个可执行文件，也就是 ELF 文件。执行 ELF 文件的时候，会通过「装载器」把 ELF 文件装载到内存里，CPU 读取内存中的指令和数据，于是程序就被执行起来了。
2. window中可执行文件叫PE(拓展名通常是.exe, .sys等)
3.linux是宏内核， window是混合内核
宏内核，包含多个模块，整个内核像一个完整的程序；
微内核，有一个最小版本的内核，一些模块和服务则由用户态管理；
~~~

**用户态和内核态**：

- **用户态**：用户态是程序正常运行的地方，用户进程在这里执行。用户态不能直接访问硬件，也不能直接访问内核态数据结构。
- **内核态**：内核态是操作系统核心代码运行的地方，能够直接访问硬件和内存，并可以执行特权操作。系统调用（如 socket、epoll 等）将用户态进程的请求传递到内核态处理。

**epoll 和 listenfd 的资源分布**：

- **epoll**：当你调用 `epoll_create` 时，内核会在内核态创建一个 epoll 实例，并返回一个文件描述符（epoll 文件描述符），epoll 实例的实际数据结构（如红黑树和双向链表）存在于内核态。
- **listenfd**：监听套接字（listenfd）也是由内核管理的资源。调用 `socket` 创建套接字，调用 `bind` 绑定地址和端口，调用 `listen` 开始监听。这些操作都是由内核完成的，用户态进程通过文件描述符与这些内核资源交互。