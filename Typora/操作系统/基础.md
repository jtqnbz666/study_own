ELF文件

~~~shell
1. 编写的代码，首先通过「编译器」编译成汇编代码，接着通过「汇编器」变成目标代码，也就是目标文件，最后通过「链接器」把多个目标文件以及调用的各种函数库链接起来，形成一个可执行文件，也就是 ELF 文件。执行 ELF 文件的时候，会通过「装载器」把 ELF 文件装载到内存里，CPU 读取内存中的指令和数据，于是程序就被执行起来了。
2. window中可执行文件叫PE(拓展名通常是.exe, .sys等)
3.linux是宏内核， window是混合内核
宏内核，包含多个模块，整个内核像一个完整的程序；
微内核，有一个最小版本的内核，一些模块和服务则由用户态管理；
~~~

**用户态和内核态**：

- **用户态**：用户态是程序正常运行的地方，用户进程在这里执行。用户态不能直接访问硬件，也不能直接访问内核态数据结构。
- **内核态**：内核态是操作系统核心代码运行的地方，能够直接访问硬件和内存，并可以执行特权操作。系统调用（如 socket、epoll 等）将用户态进程的请求传递到内核态处理。

**内核资源**：

文件描述符(比如epoll 和 listenfd )都是内核资源，当你调用 `epoll_create` 时，内核会在内核态创建一个 epoll 实例，并返回一个文件描述符（epoll 文件描述符），epoll 实例的实际数据结构（如红黑树和双向链表）存在于内核态，监听套接字（listenfd）也是由内核管理的资源，用户态进程通过文件描述符与这些内核资源交互。

**DMA应用**

~~~
设备分为块设备和字符设备，比如鼠标每次点击都会触发硬中断通知cpu进行中断处理，而块设备比如磁盘触发中断的次数会很频繁(块设备因为数据交互量比较大所以有一块缓冲区)，影响CPU的效率(因为中断的成本是比较高的，涉及对现场的保留和恢复)，所以有了DMA，cpu直接对DMA控制器编码告诉它需要哪些数据以及放到哪，DMA控制器进一步控制磁盘的设备控制器，磁盘的设备控制器负责把内容直接放到指定的内存区域然后通知DMA控制器自己放完了，DMA控制器进一步触发中断告诉CPU可以去拿数据了
~~~

**设备控制层次**

~~~shell
分为块设备和字符设备，块设置由于数据交互量大设立了单独的缓冲区，设备由设备控制器进行控制，设备控制器有独立的寄存器(命令寄存器、数据寄存器、状态寄存器)，设备控制器又由设备的驱动程序来屏蔽不同设备的差异，不同类别的设备有各自的驱动程序(比如鼠标驱动程序，键盘驱动程序)。

# 简言：驱动程序属于内核部分内容，设备控制器属于硬件层面的内容，驱动程序(鼠标类、键盘类)屏蔽了不同类别设备差异(镭射鼠标、联想鼠标)，通过操纵设备控制器进一步控制设备。
~~~

