Linux 线程基础：
	1.什么是线程
			进程是os资源分配的基本单位
			线程是os调度执行的基本单位

2.2版本的内核中没有线程  ，并且进程的个数有限   
		轻量级的进程

2.4版本的内核中 有了线程的概念  线程个数无线

比线程小的单位称为 协程

![1645849985274](C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\1645849985274.png)

1.创建线程

​	pthread_create();

2.线程结束

​	pthread_exit;  //进程结束  exit_exit;
​	通过别的线程来结束 pthread_cancel

3.线程同步

​	多个线程可以同时访问的区域，称为临界区域。
​											数据，称为临界数据。

​	多个线程同时操作临界数据     数据脏
​		解决临界数据脏的问题	  线程同步

			1. 原子锁
	 		2. 自旋锁
	 		3. 信号量
	 		4. 读写锁
	 		5. 互斥量
	 		6. 条件变量（临界变量）

原子锁：不可分割

atomic_add
atomic_inc
atomic_set

互斥量：互相之间排斥(利用互斥锁)

1. 初始化互斥量   pthread_mutex_init
2. 上锁		pthread_mutex_lock
3. 判断是否上锁    pthread_mutex_trylock
4. 解锁       pthread_mutex_unlock
5. 销毁锁   pthread_mutex_destroy

条件变量（临界变量）

![1645865141418](C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\1645865141418.png)

读写锁：读读相容   读写相斥   写写相斥

1. 初始化	pthread_rwlock_init
2. 获取锁	pthread_rwlock_wrlock
   				pthread_rwlock_rdlock
3. 释放锁   pthread_rwlock_unlock
4. 销毁锁   pthread_rwlock_destroy

![1645868469692](C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\1645868469692.png)



自旋锁建立锁资源消耗少，当线程阻塞的时候，它会一致循环检查锁是否可用
所以说当它处于阻塞的情况下，消耗资源相对多。
互斥锁建立锁资源消耗多，当线程阻塞的时候，不会一直循环，不消耗资源。

自旋锁使用于阻塞很短时间的情况，互斥锁使用于阻塞时间长的情况

自旋锁：

![1645870584515](C:\Users\ASUS\AppData\Roaming\Typora\typora-user-images\1645870584515.png)